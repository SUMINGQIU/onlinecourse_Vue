"use strict";(self["webpackChunkonlinelearning"]=self["webpackChunkonlinelearning"]||[]).push([[586],{4259:function(e,l,t){t.d(l,{M:function(){return o},u:function(){return r}});var a=t(6154);const o=e=>a.Z.post("/api/v1/user/login",e).then((e=>e.data)),r=e=>a.Z.post("/api/v1/user/register",e).then((e=>e.data))},9478:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252);const o={class:"registerNormalUser"},r=(0,a._)("h2",null,"欢迎注册 ",-1);function s(e,l,t,s,i,n){const u=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),m=(0,a.up)("el-button"),p=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",o,[r,(0,a.Wm)(p,{ref:"form",model:i.form,"label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"用户名"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.user_name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.user_name=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"用户密码"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.password=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"再次输入"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.password_confirm,"onUpdate:modelValue":l[2]||(l[2]=e=>i.form.password_confirm=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"邮箱"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.nickname,"onUpdate:modelValue":l[3]||(l[3]=e=>i.form.nickname=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",onClick:n.OnSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)("注册")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])}var i=t(4259),n={name:"RegisterNormalUser",data(){return{form:{nickname:"",user_name:"",password:"",password_confirm:""}}},methods:{OnSubmit(){i.u(this.form).then((e=>{console.log(e),console.log(e.msg),null!=e.msg&&0!=e.status?"两次输入的密码不相同"==e.msg?this.$notify.error({title:"登录失败",message:e.msg}):"用户名已经注册"==e.msg?this.$notify.error({title:"用户名已经注册",message:e.msg}):"昵称被占用"==e.msg?this.$notify.error({title:"邮箱已注册"}):"密码加密失败"==e.msg?this.$notify.error({title:"密码加密失败",message:e.msg}):this.$notify.error({title:"注册失败,请检查密码，九位及以上字母与数字！",message:e.msg}):this.$notify({title:"注册成功",type:"success"})})).catch((e=>{this.$notify.error({title:"404 Not found",message:e})}))}},components:{}},u=t(3744);const d=(0,u.Z)(n,[["render",s]]);var m=d},5788:function(e,l,t){t.r(l),t.d(l,{default:function(){return w}});var a=t(6252);const o={class:"post-video"},r=(0,a._)("h2",null,"欢迎投稿： ",-1),s=["src"],i={key:1,class:"el-icon-plus avatar-uploader-icon"},n=(0,a._)("div",{class:"el-upload__tip"},"只能上传png和jpg文件，大小不超过2MB",-1),u=["src"];function d(e,l,t,d,m,p){const f=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),g=(0,a.up)("el-upload"),h=(0,a.up)("el-dialog"),v=(0,a.up)("el-button"),w=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",o,[r,(0,a.Wm)(w,{ref:"form",model:m.form,"label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"标题"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:m.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.title=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"视频地址"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{type:"url ",modelValue:m.form.url,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.url=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{type:"textarea",modelValue:m.form.info,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.info=e),style:{width:"600px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"视频封面"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"avatar-uploader",label:"描述",action:"",ref:"upload","on-preview":p.handlePictureCardPreview,"on-success":p.handleAvatarSuccess,"before-upload":p.fnBeforeUpload,"http-request":p.fnUploadRequest,"show-file-list":!1},{tip:(0,a.w5)((()=>[n])),default:(0,a.w5)((()=>[m.imageUrl?((0,a.wg)(),(0,a.iD)("img",{key:0,src:m.imageUrl,class:"avatar"},null,8,s)):((0,a.wg)(),(0,a.iD)("i",i))])),_:1},8,["on-preview","on-success","before-upload","http-request"])])),_:1}),(0,a.Wm)(h,{visible:m.dialogVisible,"onUpdate:visible":l[3]||(l[3]=e=>m.dialogVisible=e)},{default:(0,a.w5)((()=>[(0,a._)("img",{width:"100%",src:m.dialogImageUrl,alt:""},null,8,u)])),_:1},8,["visible"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{type:"primary",onClick:p.OnSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)("立即创建")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])}var m=t(7080),p=t(6154);const f=e=>p.Z.post("/api/v1/upload/token",{filename:e}).then((e=>e.data));var c=f,g={name:"PostVideo ",data(){return{imageUrl:"",dialogImageUrl:"",dialogVisible:!1,form:{title:"",info:"",url:"",avatar:""}}},methods:{handleAvatarSuccess(e,l){this.imageUrl=URL.createObjectURL(l.raw)},fnBeforeUpload(e){const l="image/png"===e.type||"image/jpeg"===e.type,t=e.size/1024/1024<2;return l||this.$message.error("只能接受PNG格式！"),t||this.$message.error("上传图片不能超过 2MB！"),l&&t},fnUploadRequest(e){c(e.file.name).then((l=>{const t=new XMLHttpRequest;t.open("PUT",l.data.put,!0),t.withCredentials=!0,t.send(e.file),t.onload=()=>{this.imageUrl=l.data.get,this.form.avatar=l.data.key}})).catch((e=>{this.$notify.error({title:"网络错误，或者服务器宕机",message:e})}))},OnSubmit(){m.At(this.form).then((e=>{e.code>0?this.$notify.error({title:"投稿失败",message:e.msg}):this.$notify({title:"投稿成功",message:`您的投稿ID为${e.data.id}`,type:"success"})})).catch((e=>{this.$notify.error({title:"404 Not found",message:e})}))},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}},components:{}},h=t(3744);const v=(0,h.Z)(g,[["render",d]]);var w=v},9735:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252);const o={class:"registerUser"},r=(0,a._)("h2",null,"欢迎登录 ",-1);function s(e,l,t,s,i,n){const u=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),m=(0,a.up)("el-button"),p=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",o,[r,(0,a.Wm)(p,{ref:"form",model:i.form,"label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"用户名"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.user_name,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.user_name=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{label:"用户密码"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:i.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.password=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",onClick:n.OnSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)("登录")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])}var i=t(4259),n={name:"RegisterUser",data(){return{form:{user_name:"",password:""}}},methods:{OnSubmit(){i.M(this.form).then((e=>{0!=e.status?this.$notify.error({title:"登录失败",message:e.msg}):this.$notify({title:"登录成功",type:"success"})})).catch((e=>{this.$notify.error({title:"404 Not found",message:e})}))}},components:{}},u=t(3744);const d=(0,u.Z)(n,[["render",s]]);var m=d},2161:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(6252),o=t(3577);const r={class:"post-video"},s={class:"video-header"},i={class:"video-data"},n={class:"video-info"};function u(e,l,t,u,d,m){const p=(0,a.up)("videoPlay");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",s,[(0,a._)("h2",null,(0,o.zw)(u.video.title),1),(0,a._)("div",i,(0,o.zw)(u.video.view),1)]),(0,a.Wm)(p,(0,a.dG)(u.playerOptions,{poster:u.playerOptions.postUrl}),null,16,["poster"]),(0,a._)("div",n,[(0,a._)("pre",null,(0,o.zw)(u.video.info),1)])])}var d=t(2262),m=t(2201),p=t(2205),f=t(7080),c={components:{videoPlay:p.XN},name:"ShowVideo",setup(){const e=(0,d.iH)({}),l=(0,m.yj)(),t=(0,d.iH)(""),o=(0,d.iH)(""),r=(0,d.qj)({width:"800px",height:"450px",color:"#409eff",src:t,postUrl:o,autoplay:!1,muted:!0,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],loop:!1,mirror:!1,ligthOff:!1,control:!0,controlBtns:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]}),s=async()=>{const a=await f.om(l.params.videoID);e.value=a.data,console.log("video data is: ",e.value),t.value=e.value.URL,console.log("Avatar data is: ",e.value.Avatar),0!=e.value.Avatar.length?(console.log("ther is a pic data",e.value.Avatar),o.value=e.value.Avatar):(console.log("ther is no pic data"),o.value="https://cdn.jsdelivr.net/gh/xdlumia/files/video-play/ironMan.jpg"),console.log("url is: ",t.value),console.log("Avatar is: ",o.value)};return(0,a.wF)(s),{video:e,videoUrl:t,postUrl:o,playerOptions:r}}},g=t(3744);const h=(0,g.Z)(c,[["render",u]]);var v=h}}]);
//# sourceMappingURL=postvideo.c7018a53.js.map